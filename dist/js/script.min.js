(function(){"use strict";class a{constructor(a="Zadanie"){console.log("Task  ",this),this.id=this.generateID(),this.type="task",this.text=a,this.date=this.getTime(),this.checked=!1}generateID(){return Math.random().toString(36).substring(2,8)}getTime(){const a=new Date;return`${a.getDate()}-${a.getMonth()+1}-${a.getFullYear()} || ${a.getHours()}:${10>a.getMinutes()?"0"+a.getMinutes():a.getMinutes()} `}}new class{constructor(a){this.form=document.getElementById(a),this.listToDo=document.getElementById("listToDo"),this.listDone=document.getElementById("listDone"),this.todoArr=localStorage.getItem("todo")?JSON.parse(localStorage.getItem("todo")):[],this.events()}events(){this.arrayRender(),this.form.addEventListener("submit",b=>{b.preventDefault();let c=this.form.querySelector("#todo-task");const d=new a(c.value);this.todoArr.push(d),this.createTask(d),this.storageUpdate(),c.value=""})}createTask(a){console.log("create ",a);const b=document.createElement("li");b.classList.add("task","slide"),b.setAttribute("id",a.id);const c=document.createElement("div");c.classList.add("task__content"),c.innerText=a.text;const d=document.createElement("span");d.classList.add("task__date"),d.innerText=a.date,c.appendChild(d);const e=document.createElement("button");e.innerText="\uD83D\uDDD1",e.classList.add("btn"),e.addEventListener("click",function(a){this.deleteTask(a)}.bind(this));const f=document.createElement("button");f.innerText="\u2713",f.classList.add("btn","btn--checked"),f.addEventListener("click",function(a){this.checkTask(a)}.bind(this)),b.appendChild(c),b.appendChild(e),b.appendChild(f),a.checked?listDone.insertBefore(b,listDone.childNodes[0]):listToDo.insertBefore(b,listToDo.childNodes[0])}arrayRender(){JSON.parse(localStorage.getItem("todo")).forEach((a,b)=>{setTimeout(()=>{this.createTask(a,b)},350*b)})}storageUpdate(){localStorage.setItem("todo",JSON.stringify(this.todoArr))}deleteTask(a){const b=a.target.parentNode;this.todoArr=this.todoArr.filter(a=>a.id!==b.id),b.classList.add("slide--out"),setTimeout(()=>{b.parentNode.removeChild(b)},200),this.storageUpdate()}checkTask(a){const b=a.target.parentNode;this.todoArr.forEach(a=>{console.log("check "+a.checked),a.id===b.id&&(a.checked=!a.checked,this.createTask(a))}),b.classList.add("slide--out"),setTimeout(()=>{b.parentNode.removeChild(b)},100),this.storageUpdate()}}("form")})();